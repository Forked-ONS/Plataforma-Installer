FROM microsoft/dotnet:2.1-sdk

WORKDIR /usr/src
RUN git clone https://github.com/ONSBR/Plataforma-AuthProvider.git /usr/src

RUN pwd

WORKDIR /usr/src/api/oauth

ENV PORT=8085

EXPOSE 8085

RUN dotnet publish ./ONS.AuthProvider.OAuth.csproj -o ./published

WORKDIR /usr/src/api/oauth/published

ENTRYPOINT ["dotnet", "./ONS.AuthProvider.OAuth.dll"]